# df <- df[with(df, order(governorate, district)),]
for(i in 1:length(vars)){
var_result <- subset[which(subset$dependent.var == vars[i]),]
df[,vars[i]] <-  var_result$numbers[i]
df[,sprintf("%s_min", vars[i])] <- var_result$min[i]
df[,sprintf("%s_max", vars[i])] <- var_result$max[i]
}
extra_heading <- data.frame(t(vars), stringsAsFactors = F)
colnames(extra_heading) <- vars
extra_heading[1,] <- t(analplan_subset[,1][match(vars, analplan_subset$dependent.variable)])
extra_heading[2,] <- t(analplan_subset$research.question[match(vars, analplan_subset$dependent.variable)])
extra_heading[3,] <- t(analplan_subset$sub.research.question[match(vars, analplan_subset$dependent.variable)])
# if (severity){
#   extra_heading[5,] <- t(analplan_subset$consequence[match(vars, analplan_subset$dependent.variable)])
# }
df <- rbind.fill(df, extra_heading)
df <- df[c((nrow(df)-(nrow(extra_heading) - 1)):nrow(df),1:(nrow(df)-nrow(extra_heading))),]
# df$district <- lookup_table$english[match(df$district, lookup_table$name)]
# if(!camp){df$governorate <- lookup_table$english[match(df$governorate, lookup_table$name)]}
df[1:nrow(extra_heading), which(is.na(df[1,]))] <- ""
df
View(df)
source("R/functions/postprocessing_functions.R")
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
#SETUP
rm(list=ls(all=T))
R.version
library(rlang)
library(xlsx)
library(plyr) # rbind.fill
library(dplyr)
library(expss)
library(reshape)
library(data.table)
library(miceadds)
library(questionr)
library(koboquest) # manage kobo questionnairs
library(kobostandards) # check inputs for inconsistencies
library(xlsformfill) # generate fake data for kobo
library(surveyweights) # calculate weights from samplingframes
library(hypegrammaR) # simple stats 4 complex samples
library(composr) # horziontal operations
source("R/functions/postprocessing_functions.R")
source("R/functions/to_alphanumeric_lowercase.R")
source("R/functions/analysisplan_factory.R")
source("R/functions/Binary_Recoding.R")
#LOAD INPUT FILES
source("R/1_load_inputs.R",local = T)
response_with_composites <- recoding_preliminary(response)
#LOAD ANALYSISPLAN
dap_name <- "mpca_preliminary"
#dap_name <- "oPt_preliminary"
analysisplan <- read.csv(sprintf("input/dap/dap_%s.csv",dap_name), stringsAsFactors = F)
analysisplan$independent.variable <-  "refugee_status"
analysisplan$independent.variable.type <- "categorical"
#AGGREGATE ACROSS DISTRICTS OR/AND POPULATION GROUPS
analysisplan <- analysisplan_nationwide(analysisplan)
result <- from_analysisplan_map_to_output(response_with_composites, analysisplan = analysisplan,
questionnaire = questionnaire, confidence_level = 0.95)
name <- "oPt_refugee_disagg"
saveRDS(result,paste(sprintf("output/RDS/result_%s.RDS", name)))
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
name <- "oPt_refugee_disagg"
saveRDS(result,paste(sprintf("output/RDS/result_%s.RDS", name)))
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
summary <- read.csv(sprintf("output/raw_results/raw_results_%s.csv", name), stringsAsFactors = F)
summary <- correct.zeroes(summary)
summary <- summary %>% filter(dependent.var.value %in% c(NA,1))
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
#SETUP
rm(list=ls(all=T))
R.version
library(rlang)
library(xlsx)
library(plyr) # rbind.fill
library(dplyr)
library(expss)
library(reshape)
library(data.table)
library(miceadds)
library(questionr)
library(koboquest) # manage kobo questionnairs
library(kobostandards) # check inputs for inconsistencies
library(xlsformfill) # generate fake data for kobo
library(surveyweights) # calculate weights from samplingframes
library(hypegrammaR) # simple stats 4 complex samples
library(composr) # horziontal operations
source("R/functions/postprocessing_functions.R")
source("R/functions/to_alphanumeric_lowercase.R")
source("R/functions/analysisplan_factory.R")
source("R/functions/Binary_Recoding.R")
#LOAD INPUT FILES
source("R/1_load_inputs.R",local = T)
response_with_composites <- recoding_preliminary(response)
#LOAD ANALYSISPLAN
dap_name <- "mpca_preliminary"
#dap_name <- "oPt_preliminary"
analysisplan <- read.csv(sprintf("input/dap/dap_%s.csv",dap_name), stringsAsFactors = F)
analysisplan$independent.variable <-  "refugee_status"
analysisplan$independent.variable.type <- "categorical"
#AGGREGATE ACROSS DISTRICTS OR/AND POPULATION GROUPS
analysisplan <- analysisplan_nationwide(analysisplan)
result <- from_analysisplan_map_to_output(response_with_composites, analysisplan = analysisplan,
questionnaire = questionnaire, confidence_level = 0.95)
name <- "oPt_refugee_disagg"
saveRDS(result,paste(sprintf("output/RDS/result_%s.RDS", name)))
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
summary <- read.csv(sprintf("output/raw_results/raw_results_%s.csv", name), stringsAsFactors = F)
summary <- correct.zeroes(summary)
summary <- summary %>% filter(dependent.var.value %in% c(NA,1))
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
summary_gov<- summary
source("R/functions/postprocessing_functions.R")
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
summary <- read.csv(sprintf("output/raw_results/raw_results_%s.csv", name), stringsAsFactors = F)
summary <- correct.zeroes(summary)
summary <- summary %>% filter(dependent.var.value %in% c(NA,1))
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
#SETUP
rm(list=ls(all=T))
R.version
library(rlang)
library(xlsx)
library(plyr) # rbind.fill
library(dplyr)
library(expss)
library(reshape)
library(data.table)
library(miceadds)
library(questionr)
library(koboquest) # manage kobo questionnairs
library(kobostandards) # check inputs for inconsistencies
library(xlsformfill) # generate fake data for kobo
library(surveyweights) # calculate weights from samplingframes
library(hypegrammaR) # simple stats 4 complex samples
library(composr) # horziontal operations
source("R/functions/postprocessing_functions.R")
source("R/functions/to_alphanumeric_lowercase.R")
source("R/functions/analysisplan_factory.R")
source("R/functions/Binary_Recoding.R")
#LOAD INPUT FILES
source("R/1_load_inputs.R",local = T)
response_with_composites <- recoding_preliminary(response)
#LOAD ANALYSISPLAN
dap_name <- "mpca_preliminary"
#dap_name <- "oPt_preliminary"
analysisplan <- read.csv(sprintf("input/dap/dap_%s.csv",dap_name), stringsAsFactors = F)
analysisplan$independent.variable <-  "refugee_status"
analysisplan$independent.variable.type <- "categorical"
#AGGREGATE ACROSS DISTRICTS OR/AND POPULATION GROUPS
analysisplan <- analysisplan_nationwide(analysisplan)
result <- from_analysisplan_map_to_output(response_with_composites, analysisplan = analysisplan,
questionnaire = questionnaire, confidence_level = 0.95)
name <- "oPt_refugee_disagg"
saveRDS(result,paste(sprintf("output/RDS/result_%s.RDS", name)))
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
summary <- read.csv(sprintf("output/raw_results/raw_results_%s.csv", name), stringsAsFactors = F)
summary <- correct.zeroes(summary)
summary <- summary %>% filter(dependent.var.value %in% c(NA,1))
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
summary_gov<- summary
df2 <- rbind(summary_female, summary_male, summary_refugee, summary_non_refugee, summary_in_camp_refugee, summary_out_camp_refugee, summary_governorate)
write.csv(df, sprintf("output/raw_results/df_results_%s_filtered.csv", name), row.names=F)
response$gaggi <- ifelse(response$remote_learning > response$tot_school_aged, 1,0)
response$tot_school_aged <- response$school_girls_5_10 + response$school_girls_11_15 +
response$school_girls_16_17 + response$school_boys_5_10 + response$school_boys_11_15 +
response$school_boys_16_17
table(response$gaggi)
#SETUP
rm(list=ls(all=T))
R.version
library(rlang)
library(xlsx)
library(plyr) # rbind.fill
library(dplyr)
library(expss)
library(reshape)
library(data.table)
library(miceadds)
library(questionr)
library(koboquest) # manage kobo questionnairs
library(kobostandards) # check inputs for inconsistencies
library(xlsformfill) # generate fake data for kobo
library(surveyweights) # calculate weights from samplingframes
library(hypegrammaR) # simple stats 4 complex samples
library(composr) # horziontal operations
source("R/functions/postprocessing_functions.R")
source("R/functions/to_alphanumeric_lowercase.R")
source("R/functions/analysisplan_factory.R")
source("R/functions/Binary_Recoding.R")
#LOAD INPUT FILES
source("R/1_load_inputs.R",local = T)
response_with_composites <- recoding_preliminary(response)
#LOAD ANALYSISPLAN
dap_name <- "mpca_preliminary"
#dap_name <- "oPt_preliminary"
analysisplan <- read.csv(sprintf("input/dap/dap_%s.csv",dap_name), stringsAsFactors = F)
analysisplan$independent.variable <-  "refugee_status"
analysisplan$independent.variable.type <- "categorical"
#AGGREGATE ACROSS DISTRICTS OR/AND POPULATION GROUPS
analysisplan <- analysisplan_nationwide(analysisplan)
result <- from_analysisplan_map_to_output(response_with_composites, analysisplan = analysisplan,
questionnaire = questionnaire, confidence_level = 0.95)
name <- "oPt_refugee_disagg"
saveRDS(result,paste(sprintf("output/RDS/result_%s.RDS", name)))
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
summary <- read.csv(sprintf("output/raw_results/raw_results_%s.csv", name), stringsAsFactors = F)
summary <- correct.zeroes(summary)
summary <- summary %>% filter(dependent.var.value %in% c(NA,1))
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
library(readr)
library(tidyverse)
r <-read_csv("Input/datasets/cleaned/mpca_data_clean.csv")
r_per_female <- round((r$tot_female/r$hh_size)*100,0)
r$per_female <- round((r$tot_female/r$hh_size)*100,0)
r$per_female
r$per_male <- round((r$tot_male/r$hh_size)*100,0)
r$per_male
r$per_children <- round(((r$tot_boys + r$tot_boys)/r$hh_size)*100,0)
r$per_children
r$per_children <- round(((r$tot_boys + r$tot_girls)/r$hh_size)*100,0)
r$per_children
##%of house by age groups: adults
r$per_adults <- round((r$tot_adults / r$hh_size)*100,0)
r$per_adults
mean
##average household size
r$average_hh_size <- mean(r$hh_size, na.rm = TRUE)
r$average_hh_size
##average household size
r$average_hh_size <- round(mean(r$hh_size, na.rm = TRUE),0)
r$average_hh_size
#SETUP
rm(list=ls(all=T))
R.version
library(rlang)
library(xlsx)
library(plyr) # rbind.fill
library(dplyr)
library(expss)
library(reshape)
library(data.table)
library(miceadds)
library(questionr)
library(koboquest) # manage kobo questionnairs
library(kobostandards) # check inputs for inconsistencies
library(xlsformfill) # generate fake data for kobo
library(surveyweights) # calculate weights from samplingframes
library(hypegrammaR) # simple stats 4 complex samples
library(composr) # horziontal operations
source("R/functions/postprocessing_functions.R")
source("R/functions/to_alphanumeric_lowercase.R")
source("R/functions/analysisplan_factory.R")
source("R/functions/Binary_Recoding.R")
#LOAD INPUT FILES
source("R/1_load_inputs.R",local = T)
response_with_composites <- recoding_preliminary(response)
#SETUP
rm(list=ls(all=T))
R.version
library(rlang)
library(xlsx)
library(plyr) # rbind.fill
library(dplyr)
library(expss)
library(reshape)
library(data.table)
library(miceadds)
library(questionr)
library(koboquest) # manage kobo questionnairs
library(kobostandards) # check inputs for inconsistencies
library(xlsformfill) # generate fake data for kobo
library(surveyweights) # calculate weights from samplingframes
library(hypegrammaR) # simple stats 4 complex samples
library(composr) # horziontal operations
source("R/functions/postprocessing_functions.R")
source("R/functions/to_alphanumeric_lowercase.R")
source("R/functions/analysisplan_factory.R")
source("R/functions/Binary_Recoding.R")
#LOAD INPUT FILES
source("R/1_load_inputs.R",local = T)
response_with_composites <- recoding_preliminary(response)
#LOAD ANALYSISPLAN
dap_name <- "mpca_preliminary"
#dap_name <- "oPt_preliminary"
analysisplan <- read.csv(sprintf("input/dap/dap_%s.csv",dap_name), stringsAsFactors = F)
analysisplan$independent.variable <-  "refugee_status"
analysisplan$independent.variable.type <- "categorical"
#AGGREGATE ACROSS DISTRICTS OR/AND POPULATION GROUPS
analysisplan <- analysisplan_nationwide(analysisplan)
result <- from_analysisplan_map_to_output(response_with_composites, analysisplan = analysisplan,
questionnaire = questionnaire, confidence_level = 0.95)
name <- "oPt_mpca_refugee_disagg"
saveRDS(result,paste(sprintf("output/RDS/result_%s.RDS", name)))
summary <- bind_rows(lapply(result[[1]], function(x){x$summary.statistic}))
write.csv(summary, sprintf("output/raw_results/raw_results_%s.csv", name), row.names=F)
summary <- read.csv(sprintf("output/raw_results/raw_results_%s.csv", name), stringsAsFactors = F)
summary <- correct.zeroes(summary)
summary <- summary %>% filter(dependent.var.value %in% c(NA,1))
write.csv(summary, sprintf("output/raw_results/raw_results_%s_filtered.csv", name), row.names=F)
if(all(is.na(summary$independent.var.value))){summary$independent.var.value <- "all"}
groups <- unique(summary$independent.var.value)
groups <- groups[!is.na(groups)]
library(plyr)
for (i in 1:length(groups)) {
df <- pretty.output(summary, groups[i], analysisplan)
write.csv(df, sprintf("output/summary_sorted/summary_sorted_%s_%s.csv", name, groups[i]), row.names = F)
if(i == 1){
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], row.names=FALSE)
} else {
write.xlsx(df, file=sprintf("output/summary_sorted/summary_sorted_%s.xlsx", name), sheetName=groups[i], append=TRUE, row.names=FALSE)
}
}
response_with_composites$receive_other_assistance
response_with_composites$receive_other_assistance_which
r <-read_csv("Input/datasets/cleaned/mpca_data_clean.csv")
library(readr)
library(tidyverse)
r <-read_csv("Input/datasets/cleaned/mpca_data_clean.csv")
r$receive_other_assistance
unique(r$receive_other_assistance_which)
# Type of other assistance received
food_unrwa <- case_when(r$receive_other_assistance_which == "food_unrwa" ~ 1
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
# Type of other assistance received
food_unrwa <- case_when(r$receive_other_assistance_which == "food_unrwa" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cva_unrwa <- case_when(r$receive_other_assistance_which == "cva_unrwa" ~ 1
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cva_unrwa <- case_when(r$receive_other_assistance_which == "cva_unrwa" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cash_qatar <- case_when(r$receive_other_assistance_which == "cash_qatar" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
food_ingo <- case_when(r$receive_other_assistance_which == "food_ingo" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
food_wfp <- case_when(r$receive_other_assistance_which == "food_wfp" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cva_cbo <- case_when(r$receive_other_assistance_which == "cva_cbo" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cva_wfp <- case_when(r$receive_other_assistance_which == "cva_wfp" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cva_gov <- case_when(r$receive_other_assistance_which == "cva_gov" ~ 1
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
cva_gov <- case_when(r$receive_other_assistance_which == "cva_gov" ~ 1,
is.na(r$receive_other_assistance_which) ~ NA_real_,
TRUE ~ 0)
r$card_challenges_which
# % of HHs reporting reason why MPCA did not help in meeting HH needs following the May Escalation
r$shock3 <- case_when(r$mpca_no_help_escalation_priorities.value_distributed_insufficient == 1|r$mpca_no_help_escalation_priorities.atm_out_of_service == 1|
r$mpca_no_help_escalation_priorities.unable_to_travel == 1 | r$mpca_no_help_escalation_priorities.atm_insecure == 1 |
r$mpca_no_help_escalation_priorities.cah_not_the_best_modality == 1 | r$mpca_no_help_escalation_priorities.cash_not_timely == 1 ~ 1,
TRUE ~ 0)
table(r$shock3)
# % of HHs reporting reason why MPCA did not help in meeting HH needs following the May Escalation by reason
r$shock3_i <- mpca_no_help_escalation_priorities.value_distributed_insufficient
# % of HHs reporting reason why MPCA did not help in meeting HH needs following the May Escalation by reason
r$shock3_i <- r$mpca_no_help_escalation_priorities.value_distributed_insufficient
r$shock3_ii <- r$mpca_no_help_escalation_priorities.atm_out_of_service
r$shock3_iii <- r$mpca_no_help_escalation_priorities.unable_to_travel
r$shock3_iv <- r$mpca_no_help_escalation_priorities.atm_insecure
r$shock3_v <- r$mpca_no_help_escalation_priorities.cah_not_the_best_modality
r$shock3_vi <- r$mpca_no_help_escalation_priorities.cash_not_timely
unique(rpwd)
unique(r$pwd)
unique(r$displaced_escalation)
unique(r$occupancy_arrangement)
unique(r$shelter_type)
# % of households by primary shelter type reported in the 12 months prior to data collection
r$hh6_i <- case_when(r$shelter_type == "apartment" ~ 1,
TRUE ~ 0)
r$hh6_ii <- case_when(r$shelter_type == "house" ~ 1,
TRUE ~ 0)
r$hh6_iii <- case_when(r$shelter_type == "unfinished_abandoned_building" ~ 1,
TRUE ~ 0)
r$hh6_iv <- case_when(r$shelter_type == "makeshift_shelter" ~ 1,
TRUE ~ 0)
r$hh6_v <- case_when(r$shelter_type == "collective_shelter" ~ 1,
TRUE ~ 0)
r$occupancy_arrangement
unique(r$occupancy_arrangement)
# % of households by primary shelter type reported in the 12 months prior to data collection
r$hh7_i <- case_when(r$occupancy_arrangement == "rented" ~ 1,
TRUE ~ 0)
r$hh7_ii <- case_when(r$occupancy_arrangement == "ownership" ~ 1,
TRUE ~ 0)
r$hh7_iii <- case_when(r$occupancy_arrangement == "hosted_without_rent" ~ 1,
TRUE ~ 0)
r$hh7_iv <- case_when(r$occupancy_arrangement == "squatting" ~ 1,
TRUE ~ 0)
unique(r$exp_shock)
# % of households reporting experiencing at least one shock during the period they received MPCA, excluding the May Escalation
r$shock5 <- case_when(r$exp_shock == "yes" ~ 1,
TRUE ~ 0)
# % of households reporting reasons MPCA was ineffective In helping withstand shocks
# % of households reporting reasons MPCA was ineffective In helping withstand shocks:shock of medical expenses
r$shock7_i <- case_when(r$mpca_shock_ineffective_med.amount_small == 1 |r$mpca_shock_ineffective_med.did_not_receive_cash_intime == 1 |
r$mpca_shock_ineffective_med.did_not_receive_cash_frequently == 1 | r$mpca_shock_ineffective_med.no_access_to_atms == 1 |
r$mpca_shock_ineffective_med.cash_not_relevant == 1 ~ 1,
r$mpca_shock_ineffective_med.amount_small == 0 |r$mpca_shock_ineffective_med.did_not_receive_cash_intime == 0 |
r$mpca_shock_ineffective_med.did_not_receive_cash_frequently == 0 | r$mpca_shock_ineffective_med.no_access_to_atms == 0 |
r$mpca_shock_ineffective_med.cash_not_relevant == 0 ~ 0,
TRUE ~ NA_real_)
r$shock7_i
table(r$shock7_i)
